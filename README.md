# Rustishka

Автоматическая настройка Rust dev-окружения и production VPS.

## Быстрый старт

```bash
curl -sSL https://raw.githubusercontent.com/OlegGorsky/rustishka/main/scripts/setup.sh | bash
```

## Что устанавливается

### Локальные инструменты (setup-local.sh)

#### CLI утилиты (замена стандартных)
| Утилита | Описание | Заменяет |
|---------|----------|----------|
| **eza** | Современный ls с иконками | `ls` |
| **bat** | cat с подсветкой синтаксиса | `cat` |
| **fd** | Быстрый поиск файлов | `find` |
| **ripgrep** | Быстрый grep на Rust | `grep` |
| **zoxide** | Умный cd с историей | `cd` |
| **dust** | Визуализация размера директорий | `du` |
| **delta** | Красивый diff для git | `diff` |

#### Rust инструменты
| Утилита | Описание |
|---------|----------|
| **tokei** | Подсчёт строк кода |
| **hyperfine** | Бенчмарки командной строки |
| **gitui** | TUI для git |
| **starship** | Кастомизируемый prompt |
| **xsv** | Работа с CSV |
| **just** | Современная альтернатива make |
| **watchexec** | Выполнение команд при изменении файлов |

#### Cargo расширения
| Утилита | Описание |
|---------|----------|
| **cargo-audit** | Проверка уязвимостей в зависимостях |
| **cargo-watch** | Автоперезапуск при изменениях |
| **cargo-nextest** | Быстрый test runner |
| **bacon** | Фоновый cargo check |
| **sqlx-cli** | CLI для SQLx |

#### Node.js
| Утилита | Описание |
|---------|----------|
| **fnm** | Менеджер версий Node.js |
| **Node.js LTS** | Последняя LTS версия |
| **pnpm** | Быстрый пакетный менеджер |

#### Другое
| Утилита | Описание |
|---------|----------|
| **beads** | AI память для проектов |
| **jq** | Работа с JSON |
| **pass** | Менеджер паролей |
| **gnupg** | Шифрование |

### Серверные компоненты (setup-server.sh)

| Сервис | Версия | Порт | Описание |
|--------|--------|------|----------|
| **PostgreSQL** | 16 | 5432 | База данных |
| **Redis** | 7 | 6379 | Кэш и очереди |
| **Caddy** | 2 | 80/443 | Reverse proxy с автоматическим HTTPS |
| **Garage** | latest | 3900 | S3-совместимое хранилище |
| **Directus** | latest | 8055 | Headless CMS |
| **Netdata** | latest | 19999 | Мониторинг |
| **Vector** | latest | - | Сбор логов |

## Поддерживаемые ОС

- **NixOS** — через `nix profile install` с интеллектуальным поиском пакетов
- **macOS** — через Homebrew
- **Ubuntu/Debian** — через apt
- **Fedora** — через dnf
- **Arch Linux** — через pacman

## Особенности NixOS

Скрипт автоматически:
1. Пробует установить пакет по имени
2. Если не найден — ищет альтернативное название в nixpkgs
3. Если нет в nixpkgs — устанавливает через `cargo install` в nix-shell
4. Кэширует найденные маппинги в `~/.nix-pkg-cache.txt`

## Файлы после установки

- `~/.stack-installed.txt` — отчёт об установленных инструментах
- `~/.server-credentials-{IP}.txt` — доступы к серверу
- `~/.nix-pkg-cache.txt` — кэш маппингов пакетов (NixOS)

## Shell алиасы

После установки добавляются алиасы:
```bash
alias ls="eza --icons"
alias cat="bat"
alias find="fd"
alias grep="rg"
```

## Лицензия

MIT
